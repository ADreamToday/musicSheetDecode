#include <STC32G.h>
#include <intrins.h>
#define u8 unsigned char

// IRC = 24Mhz

u8 Timer0H = 0x00;
u8 Timer0L = 0x00;
u8 Timer0H2 = 0x00;
u8 Timer0L2 = 0x00;

u8 code soundTrack[][] = { {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xfb,0xce} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xe7} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xe7} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfc,0x78} , {0xfc,0xdb} , {0xfe,0x21} , {0xfc,0xdb} , {0xfc,0x78} , {0xfd,0xa5} , {0xfc,0x78} , {0xfc,0xdb} , {0xfe,0x21} , {0xfc,0xdb} , {0xfc,0x78} , {0xfc,0xdb} , {0xfc,0x78} , {0xfc,0xdb} , {0xfe,0x21} , {0xfc,0xdb} , {0xfc,0x78} , {0xfd,0xa5} , {0xfc,0x78} , {0xfc,0xdb} , {0xfe,0x21} , {0xfc,0xdb} , {0xfc,0x78} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0x78} , {0xfe,0x3c} , {0xfe,0x21} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xfb,0xce} , {0xfb,0xce} , {0xfc,0x43} , {0xfc,0x78} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0x5b} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfe,0x21} , {0xfe,0x3c} , {0xfe,0x6d} , {0xfe,0x99} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0xdb} , {0xfe,0x6d} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfe,0x3c} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0x78} , {0xfd,0xe7} , {0xfe,0x3c} , {0xfe,0x21} , {0xfd,0xa5} , {0xfd,0x33} , {0xfe,0x99} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0xdb} , {0xfe,0x6d} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfe,0x3c} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xfb,0xce} , {0xfd,0xe7} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xfb,0xce} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0x5b} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xf8,0xf2} , {0xfc,0x78} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xe7} , {0xfe,0x21} , {0xfe,0x3c} , {0xfe,0x99} , {0xfd,0xe7} , {0xff,0x10} , {0xfe,0xd2} , {0xfe,0xad} , {0xfe,0x99} , {0xfe,0x6d} , {0xfe,0x99} , {0xfe,0x6d} , {0xfe,0x3c} , {0xfe,0x21} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0xa5} , {0xfd,0x5b} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0x78} , {0xfe,0x3c} , {0xfc,0x78} , {0xfe,0x3c} , {0xfc,0x78} , {0xfe,0x21} , {0xfc,0x43} , {0xfd,0xa5} , {0xfb,0x4a} , {0xfd,0x33} , {0xfa,0x66} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfb,0xce} , {0xfc,0xdb} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xa5} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xfb,0xce} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0x5b} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0x5b} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0x5b} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfd,0xa5} , {0xfd,0x5b} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xe7} , {0xfd,0x33} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfd,0xc6} , {0xfd,0xa5} , {0xfd,0xa5} , {0xfd,0xe7} , {0xfe,0x21} , {0xfe,0x3c} , };
float code time[] = { 6.000000 , 6.000000 , 6.000000 , 6.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 1.000000 , 0.500000 , 0.500000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 2.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 2.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 2.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 2.000000 , 2.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.670000 , 0.670000 , 0.660000 , 1.500000 , 0.250000 , 0.250000 , 3.500000 , 0.250000 , 0.250000 , 0.670000 , 0.670000 , 0.660000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 1.000000 , 2.000000 , 0.670000 , 0.670000 , 0.660000 , 1.000000 , 2.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.750000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 5.000000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 1.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 0.250000 , 0.250000 , 0.250000 , 0.250000 , };
u8 code soundTrack2[][] = { {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf9,0xb7} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf8,0xf2} , {0xfc,0x78} , {0xfc,0x43} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf9,0xb7} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf8,0xf2} , {0xf7,0x9d} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf9,0xb7} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf8,0xf2} , {0xfc,0x78} , {0xfc,0x43} , {0xfb,0x4a} , {0xfa,0x66} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xfb,0xce} , {0xfb,0x4a} , {0xfa,0xb8} , {0xfa,0x66} , {0xf8,0xf2} , {0xf7,0x9d} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xff,0xff} , {0xfd,0x33} , {0xfb,0xce} , {0xfe,0x21} , {0xfd,0xa5} , {0xfd,0x5b} , {0xfd,0x33} , {0xfc,0xdb} , {0xfd,0x33} , {0xfc,0xdb} , {0xfc,0x78} , {0xfc,0x43} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfb,0x4a} , {0xfa,0xb8} , {0xfa,0x66} , {0xf9,0xb7} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf9,0xb7} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf8,0xf2} , {0xf8,0xf2} , {0xf8,0xf2} , {0xf8,0x87} , {0xf6,0x95} , {0xf4,0xce} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf7,0x9d} , {0xf9,0xb7} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0x4a} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xf8,0xf2} , {0xf7,0x9d} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0x4a} , {0xfa,0xb8} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfa,0xb8} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0x4a} , {0xfb,0x4a} , {0xfb,0xce} , {0xfb,0x4a} , {0xfa,0xb8} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0xce} , {0xfa,0x66} , {0xfa,0x66} , {0xf9,0xb7} , {0xfa,0x66} , {0xfb,0x8f} , {0xfb,0x4a} , };
float code time2[] = { 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 1.000000 , 0.500000 , 0.500000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 6.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 1.000000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 0.670000 , 0.670000 , 0.660000 , 1.500000 , 0.500000 , 2.000000 , 1.000000 , 1.000000 , 1.000000 , 1.000000 , 3.000000 , 1.000000 , 2.000000 , 0.670000 , 0.670000 , 0.660000 , 1.000000 , 2.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 3.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 6.000000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 1.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 0.500000 , 1.000000 , 1.000000 , 1.000000 , 0.500000 , 0.500000 , 0.500000 , 2.000000 , };
int length = 278;
int speed = 90; // 120个音符代码每分钟
	
int length2 = 222;
	
	
int Interrupttimes = 0;
int Interrupttimes2 = 0;
	
	
void write()
{
	P00 = !P00;
}

void T0() interrupt 1
{
	write();
}

void T2() interrupt 12
{
	P10 = !P10;
}

void T1() interrupt 3
{
	Interrupttimes++;
	Interrupttimes2++;
}


void main()
{
	int i = 0;
	int singleTime = 0;
	int sign = 1;
	
	int j = 0;
	int singleTime2 = 0;
	int sign2 = 1;
	//int temple = 0;

	//24MHz = 20*10^6hz
	EAXFR = 1;
	WTST = 0x00;
	
	P0M0 = 0x00;
	P0M1 = 0x00;
	P1M0 = 0x00;
	P1M1 = 0x00;
	P2M0 = 0x00;
	P2M1 = 0x00;
	P3M0 = 0x00;
	P3M1 = 0x00;
	P4M0 = 0x00;
	P4M1 = 0x00;
	P5M0 = 0x00;
	P5M1 = 0x00;
	P6M0 = 0x00;
	P6M1 = 0x00;
	P7M0 = 0x00;
	P7M1 = 0x00;
	
	TMOD = 0x00;
	
	TL0 = 0x00;	
	TH0 = 0x00;		
	TL1 = 0xef;	// 5ms一次中断
	TH1 = 0xd8;
	T2L = 0x00;
	T2H = 0x00;
	
	
	TR1 = 1;
	ET1 = 1;
	
	TR0 = 1;				//start timer0
	ET0 = 0;				//允许中断
	
	T2R = 1;
	ET2 = 0;
	
	EA = 1;
	
	P00 = 0;
	P10 = 0;
	


	while(1)
	{
						
		if (sign == 1)	//重载
		{
			singleTime = (12000 / speed) * time[i] - 4;	// -4 因为要停顿
			Interrupttimes = 0;
			// 更改t0高低八位
			Timer0H = soundTrack[i][0];
			Timer0L = soundTrack[i][1];
			if (Timer0H == 0xff && Timer0L == 0xff)
			{
				ET0 = 0;				//不允许中断 停顿用
			}
			else							// 允许发声
			{
				TH0 = Timer0H;
				TL0 = Timer0L;
				ET0 = 1;
			}
			sign = 4;
		}
		else if (sign == 3)	// 停顿标记
		{
			// 停顿一下
			singleTime = 4;
			Interrupttimes = 0;
			ET0 = 0;				//不允许中断
			sign = 2;
			i++;
		}
		// 判断时间到没到
		if (singleTime < Interrupttimes)
		{
			sign --;	// 设置停顿并重载标记
		}
		if (i >= length)
		{break;}
		
		
		// channel 2
		if (sign2 == 1)	//重载
		{
			singleTime2 = (12000 / speed) * time2[j] - 4;	// -4 因为要停顿
			Interrupttimes2 = 0;
			// 更改t0高低八位
			Timer0H2 = soundTrack2[j][0];
			Timer0L2 = soundTrack2[j][1];
			if (Timer0H2 == 0xff && Timer0L2 == 0xff)
			{
				ET2 = 0;				//不允许中断 停顿用
			}
			else							// 允许发声
			{
				T2H = Timer0H;
				T2L = Timer0L;
				ET2 = 1;
			}
			sign2 = 4;
		}
		else if (sign2 == 3)	// 停顿标记
		{
			// 停顿一下
			singleTime2 = 4;
			Interrupttimes2 = 0;
			ET2 = 0;				//不允许中断
			sign2 = 2;
			j++;
		}
		// 判断时间到没到
		if (singleTime2 < Interrupttimes2)
		{
			sign2--;	// 设置停顿并重载标记
		}
		if (j >= length2)
		{break;}
		

	}
	// stop
	ET0 = 0;
	ET1 = 0;
	ET2 = 0;
	P00 = 1;
	while(1){}
	
	
}